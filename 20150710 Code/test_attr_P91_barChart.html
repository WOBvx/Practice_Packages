<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Attr</title>
    <script type="text/javascript" src="../d3/d3.js"></script>
</head>

<body>

<script type="text/javascript">
	var dataset = [11,22,13,34,25,16,7,8,9,10,1,2,34,5,16,27,8,19,30];
	
	var w = 500; //<-- 把长宽放在变量中
	var h = 200;
	var svg = d3.select("body")
				.append("svg")
				.attr("width",w)
				.attr("height",h);
				
	svg.selectAll("rect") 
	// <-- rectangle 选择矩形，D3 的操作多是先选择所没有的元素
	// <-- 在 svg 中(即 <svg>...</svg>)创建 rect 矩形
			.data(dataset)
			.enter()
			.append("rect")
			.attr("x",function(d,i){
				return i*21;
			})
			.attr("y",function(d){
				return h-(d*4) ; //<--设置为0 ，图像就会颠倒
			})
			.attr("width",20)
			.attr("height", function(d) {
				return d*4;
			})
			.attr("fill",function(d){
				return "rgb(0,0," + (d * 10) + ")";
			});
	
	svg.selectAll("text")  // <-- 增加值标签
		.data(dataset)
		.enter()
		.append("text")
		.text(function(d){
			return d;
		})
		.attr("x",function(d,i){
			return i*21;
		})
		.attr("y",function(d){
			return h - 2 - (d*4);
		});
			
</script>

</body>

</html>